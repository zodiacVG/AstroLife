# 星航预言家产品需求文档 (PRD)

## 产品定位

**星航预言家**是一款将航天历史与神秘占卜相结合的创新应用。用户通过输入个人信息和当下困惑，获得由三艘历史航天器组成的"星舟"指引，每艘星舟都承载着独特的宇宙智慧和人生启示。

### 核心用户价值
- **情感共鸣**：将个人命运与人类航天史产生神秘连接
- **精神指引**：通过航天器的象征意义获得人生方向的启发
- **知识融合**：在占卜过程中学习航天历史，提升科学素养
- **社交分享**：独特的占卜结果促进用户间的分享和讨论

## 核心世界观：宇宙三重奏

### 共振宇宙论
宇宙中的每一个存在都与其他存在产生微妙的共振。人类的命运轨迹与航天器的历史轨迹在特定时刻产生共鸣，形成指引人生的星舟图谱。

### 三体共鸣原理
- **本命星舟**：基于出生月日与发射月日的共振，代表与生俱来的天赋使命
- **天时星舟**：基于提问时刻与发射时刻的共振，反映当下的宇宙能量
- **问道星舟**：通过AI语义分析，从星舟库中选择最契合用户问题的精神向导（数量可扩展）

### 星舟神谕体系
每艘航天器都是一个独特的神谕载体，承载着特定的宇宙智慧：
- **开拓者**：象征勇气与突破
- **探索者**：代表好奇与发现
- **牺牲者**：体现代价与教训
- **合作者**：彰显团结与共赢

## 用户旅程：五重宇宙体验

### 阶段1：星际召唤（着陆页）
**场景**：用户首次进入神秘的宇宙占卜空间
**体验**：
- 深邃星空背景缓缓旋转，星光粒子随鼠标移动
- 中央出现"星航预言家"发光文字，下方是邀请语：
  "在星辰的见证下，每一艘星舟都承载着人类的梦想与勇气..."
- 渐变出现的"开始占卜"按钮，带有脉动光效

**文案**：
> "此刻的你，是否感受到来自宇宙的召唤？"
> "让我们一起，在群星星舟中寻找属于你的命运指引"

### 阶段2：命运印记（信息输入）
**场景**：用户输入个人信息和当下困惑
**体验**：
- 优雅的表单设计，每个输入框都有星空背景
- 出生日期选择器：显示星座图标和月相变化
- 问题输入框：带有字数统计和实时预览
- 提交按钮：根据输入完整性逐渐亮起

**交互细节**：
- 日期选择器：滑动选择时显示对应星座图案
- 问题输入：实时显示"已输入X个字符"
- 表单验证：优雅的红色提示，不破坏神秘感

**文案**：
> "请留下你的出生印记，让星辰记住你的存在"
> "此刻困扰你的心事，宇宙已经准备好答案"

### 阶段3：三体共鸣（计算过程）
**场景**：系统进行三体共鸣计算
**体验**：
- 全屏动画：三道光束从不同方向汇聚
- 进度条显示："正在与宇宙共振..."
- 三个计算阶段：
  1. "解析本命星图..." (2秒)
  2. "感应天时能量..." (2秒)  
  3. "聆听星舟神谕..." (3秒)
- 背景音效：低沉的宇宙嗡鸣逐渐升高

**视觉特效**：
- 粒子系统：星光随计算进度密度变化
- 色彩变化：从深蓝逐渐过渡到紫金
- 文字动画：每个阶段文字淡入淡出

### 阶段4：星图显现（结果展示）
**场景**：三艘星舟缓缓显现，形成命运星图
**体验**：
- 三艘星舟从不同方向旋转飞入，最终形成三角形排列
- 每艘星舟都有独特的光效和动画
- 点击任意星舟查看详细解读
- 背景星空根据结果调整亮度和色彩

**信息层次**：
1. **星舟名称**：发光大字，带有型号标识
2. **发射日期**：精确到月日，显示历史感
3. **神谕解读**：诗意的文字描述
4. **关键词标签**：可点击的互动标签
5. **分享按钮**：一键分享到社交媒体

**文案示例**：
> "你的本命星舟是**哈勃空间望远镜**，它象征着永不停止的探索精神..."
> "天时星舟**旅行者1号**正在向你传递永恒探索的能量..."
> "问道星舟**阿波罗11号**回应你的问题：人类的每一步伟大跨越，都始于一个看似不可能的梦想..."

### 阶段5：永恒印记（分享与保存）
**场景**：用户保存或分享占卜结果
**体验**：
- 生成精美的分享卡片：星空背景+三艘星舟排列
- 个性化文案：包含用户姓名和占卜时间
- 多种分享方式：微信、微博、保存图片
- 历史记录：优雅的列表展示过往占卜

**分享文案模板**：
> "今天，我在星航预言家获得了宇宙的独特指引：
> 我的本命星舟是[星舟名]，它告诉我[个性化解读]...
> 三体共鸣已完成，宇宙为你揭示了这样的命运轨迹..."

## 数据架构：星舟神谕库

### 数据结构：starships.json
整合后的星舟数据包含完整的基础信息和神谕属性：

```json
{
  "archive_id": "sputnik_1",
  "name_cn": "史普尼克1号",
  "name_official": "Sputnik 1",
  "launch_date": "1957-10-04",
  "mission_description": "人类首颗人造地球卫星，开启了太空时代",
  "mission_type": "地球轨道卫星",
  "country": "苏联",
  "oracle_keywords": ["勇气", "突破", "开创", "先驱", "人类第一步"],
  "oracle_text": "人类将首次挣脱地球引力的枷锁，这一小步，却是文明的一大步。你的命运中蕴含着开创新天地的勇气，不要害怕成为第一个吃螃蟹的人。"
}
```

### 星舟示例列表（可扩展）

1. **史普尼克1号** (1957-10-04) - 开拓先锋
   - 关键词：["勇气", "突破", "开创", "先驱"]
   - 神谕：开启不可能的可能

2. **东方1号** (1961-04-12) - 人类先驱
   - 关键词：["人类", "梦想", "突破", "极限"]
   - 神谕：个人一小步，人类一大步

3. **水星-红石3号** (1961-05-05) - 回应挑战
   - 关键词：["回应", "挑战", "竞争", "荣耀"]
   - 神谕：面对挑战时的优雅回应

4. **旅行者1号** (1977-09-05) - 永恒探索
   - 关键词：["永恒", "探索", "未知", "孤独"]
   - 神谕：有些旅程没有终点，但每一步都值得

5. **水手4号** (1964-11-28) - 真相揭示
   - 关键词：["真相", "揭示", "发现", "科学"]
   - 神谕：真相可能残酷，但永远珍贵

6. **阿波罗1号** - 警示教训
   - 关键词：["牺牲", "警示", "教训", "铭记"]
   - 神谕：每一次失败都是通往成功的必经之路

7. **哈勃空间望远镜** (1990-04-24) - 深邃洞察
   - 关键词：["洞察", "视野", "深远", "科学"]
   - 神谕：换个角度看世界，你会发现全新的宇宙

8. **阿波罗11号** (1969-07-16) - 人类巅峰
   - 关键词：["巅峰", "成就", "梦想", "团结"]
   - 神谕：当人类团结一心时，可以移山填海

9. **阿波罗13号** (1970-04-11) - 危机智慧
   - 关键词：["危机", "智慧", "冷静", "解决"]
   - 神谕：危机中的冷静思考比黄金更珍贵

10. **月球3号** (1959-10-04) - 秘密揭示者
    - 关键词：["秘密", "揭示", "未知", "探索"]
    - 神谕：有些秘密需要勇气去揭开

11. **詹姆斯·韦伯空间望远镜** (2021-12-25) - 时空之眼
    - 关键词：["时空", "眼睛", "深远", "未来"]
    - 神谕：看得越远，越能理解当下的意义

12. **好奇号火星车** (2011-11-26) - 红色星球探索者
    - 关键词：["好奇", "红色星球", "探索", "科学"]
    - 神谕：好奇心是人类进步的不竭动力

13. **国际空间站** (1998-11-20) - 人类合作象征
    - 关键词：["合作", "和平", "人类", "共同"]
    - 神谕：当人类放下分歧，可以创造真正的奇迹

14. **毅力号火星车** (2020-07-30) - 生命探寻者
    - 关键词：["毅力", "生命", "探寻", "希望"]
    - 神谕：永不放弃寻找生命意义的努力

15. **天问一号** (2020-07-23) - 东方崛起
    - 关键词：["天问", "东方", "崛起", "现代"]
    - 神谕：古老文明的现代觉醒，新的探索篇章

16. **嫦娥四号** (2018-12-07) - 背面先驱
    - 关键词：["背面", "先驱", "神秘", "突破"]
    - 神谕：敢于探索无人到达的未知领域

17. **嫦娥五号** (2020-11-23) - 回归使者
    - 关键词：["回归", "使者", "收获", "完成"]
    - 神谕：每一次远行都是为了更好的归来

## 计算规则：三体共鸣算法

### 本命星舟计算
- **算法**：基于出生月日与发射月日的最小差值
- **公式**：min(|birth_month_day - launch_month_day|)
- **循环处理**：跨年日期差值按循环年计算
- **示例**：出生于5月15日，与10月4日发射的史普尼克1号差值为141天

### 天时星舟计算
- **算法**：基于提问月日与发射月日的最小差值
- **公式**：min(|inquiry_month_day - launch_month_day|)
- **实时性**：每次提问重新计算

### 问道星舟选择
- **机制**：LLM语义分析
- **框架**：
  ```
  系统提示词：你是一位星际预言家，需要根据用户问题从星舟库中选择最适合的"问道星舟"（数量可扩展）。
  
  选择标准：
  1. 问题主题与航天器任务性质的匹配度
  2. 问题情感色彩与航天器象征意义的契合度
  3. 问题时间维度与航天器历史地位的关联性
  ```

## 视觉设计规范

### 色彩体系
- **主色调**：深空蓝 (#0B1426)
- **星光色**：银白 (#E8E8E8)
- **神秘紫**：紫罗兰 (#6366F1)
- **能量金**：琥珀金 (#F59E0B)

### 字体规范
- **标题**：思源黑体 Heavy
- **正文**：思源黑体 Regular
- **神秘文本**：霞鹜文楷
- **英文**：Inter

### 界面布局
- **移动端优先**：响应式设计
- **星空背景**：动态粒子效果
- **星舟卡片**：半透明玻璃拟态
- **按钮**：发光悬浮效果

## 文案体系

### 神秘文案风格
- **诗意化**：避免直白，采用隐喻和象征
- **宇宙感**：融入天文学和航天术语
- **个人化**：使用第二人称"你"
- **仪式感**：营造庄重神秘的氛围

### 关键文案示例
- **介绍页**："在星辰的见证下，每一艘星舟都承载着人类的梦想与勇气..."
- **结果页**："三体共鸣已完成，宇宙为你揭示了这样的命运轨迹..."
- **星舟解读**："你的本命星舟是哈勃望远镜，它象征着永不停止的探索精神..."

## 技术实现要点

### 前端架构
- **框架**：React 18 + Vite + TypeScript
- **状态管理**：Zustand
- **动画**：Framer Motion
- **样式**：Tailwind CSS
- **图标**：Lucide React

### 后端架构
- **框架**：Python + FastAPI
- **数据库**：外部数据库（可动态新增数据）
- **AI服务**：阿里云百炼（OpenAI 兼容模式，可选）
- **缓存**：可选（如 Redis）
- **部署**：按需（Zeabur/Railway/自托管）

### API设计
- **RESTful API**：符合REST设计原则
- **版本控制**：v1版本前缀
- **错误处理**：统一错误响应格式
- **限流**：基于IP的速率限制

### 性能优化
- **数据缓存**：星舟数据24小时缓存
- **计算缓存**：相同参数10分钟缓存
- **图片优化**：WebP格式，懒加载
- **代码分割**：按路由分割

## 用户体验优化

### 加载体验
- **骨架屏**：计算过程中的占位动画
- **进度提示**：三体共鸣的进度条
- **失败重试**：网络错误时的重试机制

### 交互细节
- **输入验证**：实时验证日期格式
- **防抖处理**：问题输入的防抖提交
- **手势支持**：移动端滑动手势
- **分享功能**：一键分享到社交媒体

### 无障碍设计
- **语义化HTML**：屏幕阅读器支持
- **键盘导航**：完整的键盘操作支持
- **色彩对比**：WCAG 2.1 AA标准
- **字体大小**：可调节的字体大小

## 数据安全与隐私

### 数据收集
- **最小化原则**：仅收集必要信息
- **匿名化**：用户姓名仅用于展示
- **本地存储**：偏好设置本地存储
- **GDPR合规**：符合欧盟数据保护法规

### 安全措施
- **HTTPS**：全站SSL加密
- **输入验证**：防止XSS和SQL注入
- **API限流**：防止恶意请求
- **数据备份**：定期数据备份

## 测试策略

### 功能测试
- **单元测试**：计算算法验证
- **集成测试**：API端到端测试
- **UI测试**：用户界面交互测试
- **性能测试**：加载时间和响应速度

### 兼容性测试
- **浏览器**：Chrome, Firefox, Safari, Edge
- **设备**：桌面、平板、手机
- **网络**：3G, 4G, 5G, WiFi
- **分辨率**：320px - 4K

## 发布计划

### MVP版本（第1周）
- [ ] 基础占卜功能
- [ ] 三体共鸣计算
- [ ] 结果展示页面
- [ ] 基础响应式设计

### 完整版本（第2-3周）
- [ ] 动画效果优化
- [ ] 分享功能
- [ ] 历史记录
- [ ] 性能优化

### 高级功能（第4周）
- [ ] 用户账户系统
- [ ] 个性化推荐
- [ ] 社区分享
- [ ] 高级统计分析

## 成功指标

### 用户指标
- **日活跃用户**：100+
- **平均使用时长**：3分钟+
- **分享率**：20%+
- **用户满意度**：4.5/5

### 技术指标
- **页面加载时间**：<3秒
- **API响应时间**：<500ms
- **错误率**：<1%
- **移动端占比**：60%+

### 业务指标
- **占卜完成率**：80%+
- **重复使用率**：40%+
- **社交分享**：每日10次+
- **用户反馈**：正面评价80%+
